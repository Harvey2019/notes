### 2021.6.14

1. 阅读师兄的硕士论文《复杂路况下四足机器人自主运动规划与控制研究》第四第五章

   了解四足机器人软件和硬件框架、从实验看出其功能



###2021.6.15

1. 向舍友的师兄拿了一份《四足机器人》笔记，有空看看

2. 梳理和总结《复杂路况下四足机器人自主运动规划与控制研究》涉及的知识点

   1. **规划**
      * 步态生产：调整支撑相和摆动相的时间比例
      * 足端轨迹规划：已知始末点，特定插值曲线
      * 静态身体位姿优化：序列二次规划（质心投影在支撑多边形中，足端可到达）
      * 动态行走身体位姿规划：位置，质心投影在虚拟支撑多边形中；姿势，身体与最优行走平面平行
      * 通过双目深度相机感知路况，根据路况信息进行落脚点优化
   2. **控制**
      * 摆动腿逆动力学控制：足端位置速度PD+前馈，获得关节力矩
      * 躯体虚拟模型控制：躯体位姿速度PD+前馈+重力补偿，获得支撑力和力矩；二次规划分配支撑脚的支持力，获得关节力矩
      * 静态行走控制：姿态适应+静态迈步
      * 动态行走控制：弹簧倒立摆模型（落脚点控制加减速）

   

3. 分析固定基座机械臂和四足机器人的广义质量矩阵$$M$$，$$b(q,\dot{q})$$，$$g(q)$$的构造

   ![1623757386597](C:\Users\lenovo\AppData\Local\Temp\1623757386597.png)

   雅克比矩阵$$J_{si}$$不同

   

4. 探究足部轨迹的估计方法

   IMU估计躯体位姿，关节位置+正运动学得到足端位置

   

5. 阅读《使用零力矩点轨迹规划的四足机器人步态进化方法》

   1. ZMP在支撑多边形内
   2. ZMP的位置与重心的位置、速度、加速度存在对应关系
   3. 使用遗传算法得到最优ZMP轨迹，从而得到最优重心轨迹



### 2021.6.16-17

1. 初步学习MPC，观看视频《了解模型预测控制(MPC)与MATLAB仿真》

   1. MPC优点和特点
   2. 参数设计：采样时间、预测时间、控制时间
   3. Adative, Gain-scheduled, Nonlinear MPC
   4. Run faster MPC

2. 阅读文献*Control of dynamic gaits for a quadrupedal robot*

   1. 腿部三自由度

      * HAA
      * HFE
      * KFE

   2. 运动规划

      1. 地形高度：一阶滤波估计**？**
      2. 步态时间：周期T映射为相位[0,1]，步态模式决定支撑相和摆动相的比例；定义了规则来判断某腿是否可以切换为支撑模式，使用FLAG来判定某腿是否触地，从而选择控制方法**（规则没看明白）**
      3. 动态trot落脚点计算（相对HAA关节）：落点=前馈（期望速度）+反馈（倒立摆）
      4. 支撑脚配置：确保触地
      5. 身躯运动：通过四足端权重确定质心位置，权重是相位的函数

   3. 运动控制

      1. 摆动腿使用位置控制
      2. 支撑腿使用扭矩控制（支持力，分配，映射）

   4. 步态模式切换

      trott和walk有平滑过渡，平滑过渡可以通过对控制参数线性插值来生成，如$$k_p k_d$$等



### 2021.6.18

1. 理解D-H建模法

   参考徐老师的机器人学第四章

2. 加强MPC过程的理解

   参考网址：https://www.cnblogs.com/csymemory/p/13379701.html

   * 在每一个采用时刻，根据获得的当前测量信息，在线求解一个有限时间开环优化问题，并将得到的控制序列的第一个元素作用于被控对象：

     MPC能够根据系统k时刻的状态和k时刻的控制输入，预测到k+1时刻的输出。k时刻的输入正是用来控制系统k+1时间的输出，使其最大限度的接近k+1时刻的期望值。

     根据预测的k+1时刻的状态，使用控制算法得到控制输入，在预测k+2时刻的状态，如此循环，最后在全部预测序列中选择最优的控制序列，滚动优化。



### 2021.6.19

1. 了解Simulink的使用

   1. 模块用法

      * Mux ：将多个数据合并，e.g. [t,u] 和[t,v] 合并为[t,u,v]
      * Demux：与Mux相反
      * from workspace: 调用workspace中的向量，格式[t,u,v,...]
      * subsystem：封装模块

   2. 模块封装

      1. 双击subsystem构建模块内部
      2. 右键，Mask设置封装封面等具体参数

   3. 模块库建立

      新建Library，建立模块；使用时打开库。

   4. 函数模块

      使用matlab function模块，双击编写函数

































